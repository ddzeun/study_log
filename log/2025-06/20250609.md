

## 1. í•¸ë“¤ëŸ¬ ë©”ì„œë“œë€?

> í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” **Controller í´ë˜ìŠ¤ ì•ˆì˜ ë©”ì„œë“œ**ë¡œ, `@RequestMapping`, `@GetMapping`, `@PostMapping` ê°™ì€ ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©


### í•¸ë“¤ëŸ¬ ë©”ì„œë“œ ë§¤ê°œë³€ìˆ˜(ë°ì´í„° ë°›ëŠ” ë°©ë²•)

### 1-1. `WebRequest` / `HttpServletRequest`

* ì„œë¸”ë¦¿ì˜ ìš”ì²­ ê°ì²´ì²˜ëŸ¼ ì‘ë™ (íŒŒë¼ë¯¸í„° êº¼ë‚´ê¸° ê°€ëŠ¥)
* Spring ì „ìš©ì´ `WebRequest`

```java
@PostMapping("/add")
public String add(WebRequest request, Model model) {
    String name = request.getParameter("name");
    model.addAttribute("msg", name + " ë“±ë¡ ì™„ë£Œ");
    return "result";
}
```

---

### 1-2. `@RequestParam`

* í¼ì˜ name ì†ì„±ê°’ê³¼ ë§¤í•‘í•´ì„œ ê°œë³„ íŒŒë¼ë¯¸í„° ë°›ê¸°
* `required`, `defaultValue` ì„¤ì • ê°€ëŠ¥

```java
@PostMapping("/update")
public String update(@RequestParam String name,
                     @RequestParam(defaultValue = "1000") int price) {
    return "ì—…ë°ì´íŠ¸ ì™„ë£Œ: " + name + ", " + price;
}
```

---

### 1-3. `@RequestParam Map<String, String>`

* ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°ë¥¼ í•œ ë²ˆì— ë°›ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

```java
@PostMapping("/bulk")
public String bulkUpdate(@RequestParam Map<String, String> params) {
    return "ë³€ê²½ëœ ì´ë¦„: " + params.get("name");
}
```

---

### 1-4. `@ModelAttribute`

* DTO ê°ì²´ë¥¼ ì»¤ë§¨ë“œ ê°ì²´ë¡œ ë°›ì•„ì„œ ìë™ìœ¼ë¡œ ë°”ì¸ë”©
* ëª¨ë¸ì—ë„ ìë™ ë“±ë¡ë¨

```java
@PostMapping("/register")
public String register(@ModelAttribute UserDTO user) {
    return user.getName() + " ë“±ë¡ë¨";
}
```

---

### 1-5. `HttpSession` / `@SessionAttributes`

* ì„¸ì…˜ì— ê°’ ì €ì¥ ë° ì¡°íšŒ
* `@SessionAttributes`ëŠ” modelì— ë‹´ê¸´ ê°’ì„ ìë™ìœ¼ë¡œ ì„¸ì…˜ì— ë“±ë¡í•¨

```java
@PostMapping("/login")
public String login(HttpSession session, @RequestParam String id) {
    session.setAttribute("id", id);
    return "ë¡œê·¸ì¸ë¨";
}
```

```java
@PostMapping("/login2")
public String loginWithModel(Model model, @RequestParam String id) {
    model.addAttribute("id", id);  // @SessionAttributesì™€ ì—°ë™ë¨
    return "ë¡œê·¸ì¸ë¨";
}
```

---

### 1-6. `@RequestBody` / `@RequestHeader` / `@CookieValue`

* JSON ê°™ì€ ìš”ì²­ ë°”ë””(body) ì „ì²´ë¥¼ ë°›ê±°ë‚˜
* í—¤ë”, ì¿ í‚¤ ê°’ì„ ì½ì„ ìˆ˜ ìˆìŒ

```java
@PostMapping("/json")
public void handleJson(@RequestBody String body,
                       @RequestHeader("Content-Type") String contentType,
                       @CookieValue("JSESSIONID") String jsessionId) {
    System.out.println(body);
}
```

## 2. ë·° ë¦¬ì¡¸ë²„ (View Resolver)


> ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¦¬í„´í•œ ê°’ì„ ë³´ê³ , ì–´ë–¤ ë·°(View)ë¥¼ ë³´ì—¬ì¤„ì§€ ê²°ì •í•´ì¤Œ

```
[ì‚¬ìš©ì ìš”ì²­]
   â†“
[DispatcherServlet]
   â†“
[í•¸ë“¤ëŸ¬ ë§¤í•‘ â†’ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ì‹¤í–‰]
   â†“
[ì»¨íŠ¸ë¡¤ëŸ¬ ë¦¬í„´ê°’: String ë˜ëŠ” ModelAndView]
   â†“
ğŸ’¡ [ViewResolverê°€ 'ì´ ê°’' ë³´ê³  ì–´ë–¤ ë·°ë¥¼ ë³´ì—¬ì¤„ì§€ ê²°ì •í•¨]
   â†“
[í•´ë‹¹ ë·° ë Œë”ë§ â†’ HTML ì‘ë‹µ]
```

---

```java
return "result";
```

* `ThymeleafViewResolver`ê°€ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´:

  * ìë™ìœ¼ë¡œ ì´ë ‡ê²Œ í•´ì„í•¨ â†’ `resources/templates/result.html`

#### 2-1. ë¬¸ìì—´ë¡œ ë°˜í™˜í•œ ë·° ì´ë¦„

```java
@GetMapping("string")
public String stringReturning(Model model) {
    model.addAttribute("forwardMessage", "ë¬¸ìì—´ë¡œ viewì´ë¦„ ë°˜í™˜í•¨....");
    return "result"; // ViewResolverê°€ resources/templates/result.html ë¡œ ì—°ê²°í•´ì¤Œ
}
```

ì—¬ê¸°ì„œ `"result"`ëŠ” ë‹¨ìˆœ ë¬¸ìì—´
â†’ `ThymeleafViewResolver`ê°€ ë°›ì•„ì„œ `resources/templates/result.html`ë¡œ ì²˜ë¦¬

---

#### 2-2. ë¬¸ìì—´ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

```java
return "redirect:/";
```

ì ‘ë‘ì‚¬ `redirect:`ê°€ ë¶™ìœ¼ë©´, ViewResolverëŠ”
â†’ **ë·°ë¥¼ ë Œë”ë§í•˜ì§€ ì•Šê³ , ì¬ìš”ì²­ì„ ë³´ëƒ„ (302 redirect)**

---

#### 2-3. `ModelAndView`ë¥¼ ì‚¬ìš©í•œ ê²½ìš°

```java
ModelAndView mv = new ModelAndView();
mv.setViewName("result");
```

ì—¬ê¸°ì„œ `setViewName("result")` ë¶€ë¶„ë„ ê²°êµ­ì—ëŠ”
**ViewResolverê°€ ì²˜ë¦¬í•¨** â†’ `result.html` ë Œë”ë§

```java
mv.setViewName("redirect:/"); // ë¦¬ë‹¤ì´ë ‰íŠ¸ë„ ë§ˆì°¬ê°€ì§€
```

**`ModelAndView`ë¥¼ ì‚¬ìš©í•˜ë“ , `String`ì„ ë°˜í™˜í•˜ë“ **
ê²°êµ­ **ë¦¬ì¡¸ë²„ê°€ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì€ ë™ì¼**


## 3. ì˜ˆì™¸ ì²˜ë¦¬

```
ì˜ˆì™¸ ë°œìƒ
  â”œâ”€> í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ @ExceptionHandler ì¡´ì¬ â†’ ì²˜ë¦¬
  â””â”€> ì—†ìœ¼ë©´ GlobalExceptionHandler(@ControllerAdvice)ë¡œ ìœ„ì„
       â””â”€> ë“±ë¡ëœ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ ìˆìœ¼ë©´ ì²˜ë¦¬
       â””â”€> ì—†ìœ¼ë©´ default Exception í•¸ë“¤ëŸ¬ (@ExceptionHandler(Exception.class)) ì²˜ë¦¬
```

| êµ¬ë¶„                                        | ì ìš© ë²”ìœ„        | í•¸ë“¤ëŸ¬ ìœ„ì¹˜          | íŠ¹ì§•           |
| ----------------------------------------- | ------------ | --------------- | ------------ |
| `@ExceptionHandler`                       | íŠ¹ì • ì»¨íŠ¸ë¡¤ëŸ¬      | í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€      | í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œë§Œ ì ìš© |
| `@ControllerAdvice` + `@ExceptionHandler` | ì „ì—­           | ë³„ë„ í´ë˜ìŠ¤          | ì „ì²´ ì»¨íŠ¸ë¡¤ëŸ¬ ëŒ€ìƒ   |
| ì‚¬ìš©ì ì •ì˜ ì˜ˆì™¸                                 | ìƒí™©ì— ë§ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ | ì§ì ‘ throw + í•¸ë“¤ë§  | ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥    |
| `Exception.class` ì²˜ë¦¬                      | ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬     | ì „ì—­ ì²˜ë¦¬ì˜ fallback | default ìš©ë„   |


### ì‚¬ìš©ì ì •ì˜ ì˜ˆì™¸ ë§Œë“¤ê¸°

```java
public class MemberRegistException extends Exception {
    public MemberRegistException(String message) {
        super(message);
    }
}
```