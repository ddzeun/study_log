
## 1. `@Mapper` & `@MapperScan`

* **MyBatis**ì—ì„œ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ Mapperë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê¸° ìœ„í•œ ì• ë„ˆí…Œì´ì…˜.
* `@Mapper`: í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ê°€ Mapperì„ì„ ëª…ì‹œ. (XMLì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ SQL ë§¤í•‘ê³¼ ì—°ê²°ë¨)
* `@MapperScan`: íŠ¹ì • íŒ¨í‚¤ì§€ì— ìˆëŠ” ëª¨ë“  Mapper ì¸í„°í˜ì´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡. ì—¬ëŸ¬ Mapperë¥¼ ì¼ì¼ì´ ë“±ë¡í•˜ì§€ ì•Šê³ , **í•œ ë²ˆì— ë“±ë¡ ê°€ëŠ¥**.
* `annotationClass = Mapper.class`: `@Mapper` ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ ì¸í„°í˜ì´ìŠ¤ë§Œ ìŠ¤ìº”.

```java
@Mapper
public interface MenuMapper {
    List<MenuDTO> selectAllMenus();
}
```
> resources í•˜ìœ„ì˜ mapperíŒŒì¼ê³¼ ì´ë¦„ ê°™ì•„ì•¼í•˜ê³ , ymlì— ê²½ë¡œì„¤ì • í•´ì¤¬ê¸°ë•Œë¬¸ì— ê²½ë¡œê¹Œì§€ ê°™ì§€ ì•Šì•„ë„ ë¨


```java
@SpringBootApplication
@MapperScan(basePackages = "com.crud", annotationClass = Mapper.class)
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```
> application.ymlì— ê²½ë¡œì„¤ì •, configì— @MapperScan ë“±ë¡í•´ì¤˜ì•¼í•¨


## 2. `@Transactional`

* íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ ìŠ¤í”„ë§ ì• ë„ˆí…Œì´ì…˜.
* DB ì‘ì—…ì´ ì„±ê³µí•˜ë©´ commit, ì‹¤íŒ¨í•˜ë©´ rollback

```java
@Service
public class MenuService {

    @Transactional
    public void updateMenuAndCategory(Menu menu, Category category) {
        menuMapper.updateMenu(menu);
        categoryMapper.updateCategory(category); // ì´ ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ëª¨ë‘ ë¡¤ë°±
    }
}
```

## 3. `@PathVariable`

* URL ê²½ë¡œì—ì„œ íŠ¹ì • ê°’(ë³€ìˆ˜)ì„ ì¶”ì¶œí•´ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬.
* Restful ìŠ¤íƒ€ì¼ API ì„¤ê³„ì— ìì£¼ ì‚¬ìš©.

### ğŸ’¡ ì˜ˆì‹œ

```java
@GetMapping("/select/{code}")
public String selectMenu(@PathVariable int code, Model model) {
    MenuDTO selectedMenu = menuService.selectMenu(code);
    model.addAttribute("menu", selectedMenu);
    return "menu/select";
}
```

## 4. `@ResponseBody`

* ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì„ **ë·°ê°€ ì•„ë‹Œ HTTP ì‘ë‹µ ë°”ë””ë¡œ ì „ì†¡**.
* ì£¼ë¡œ JSON í˜•íƒœì˜ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì§ì ‘ ë°˜í™˜í•  ë•Œ ì‚¬ìš©.

```java
@GetMapping(value = "category", produces = "application/json; charset=UTF-8")
@ResponseBody
public List<CategoryDTO> findCategoryList() {
    return menuService.findAllCategory();  // JSONìœ¼ë¡œ ì‘ë‹µ
}
```

* `@RestController`ëŠ” `@Controller + @ResponseBody` ì—­í• .
* AJAX, fetch ë“±ì„ í†µí•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ê²½ìš° ì‚¬ìš©.

---

## 5. fetch + scriptë¥¼ í†µí•œ í”„ë¡ íŠ¸-ë°±ì—”ë“œ ì—°ê²°

* `fetch()`ëŠ” JSì˜ ë¹„ë™ê¸° ìš”ì²­ í•¨ìˆ˜.
* ë°±ì—”ë“œì—ì„œ JSON ë°ì´í„°ë¥¼ ë°›ì•„ HTML ìš”ì†Œì— ë°˜ì˜í•  ìˆ˜ ìˆìŒ.

```html
<script>
    fetch("/menu/code")
        .then(res => res.json())
        .then(data => {
            const $code = document.getElementById("code");
            for (let index in data) {
                const $option = document.createElement('option');
                $option.value = data[index].code;
                $option.textContent = data[index].name;
                $code.appendChild($option);
            }
        });
</script>
```

* `fetch("/menu/code")`: ë°±ì—”ë“œë¡œ GET ìš”ì²­
* `res.json()`: JSON í˜•íƒœë¡œ íŒŒì‹±
* `document.createElement('option')`: ë™ì ìœ¼ë¡œ `<select>` ì˜µì…˜ ìƒì„±

