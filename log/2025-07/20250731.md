### TTS (Text-to-Speech)

í…ìŠ¤íŠ¸ë¥¼ ìŒì„±ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ìˆ 

```python
from dotenv import load_dotenv
load_dotenv()

from openai import OpenAI
client = OpenAI()

input_text = "ê¸°ì‚¬ì˜ ë‚´ìš©..."
with client.audio.speech.with_streaming_response.create(
    model="tts-1",
    voice="shimmer",
    input=input_text[:200]
) as response:
    response.stream_to_file("output.mp3")
```

---

### STT (Speech-to-Text)

ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ìˆ 

```python
from dotenv import load_dotenv
load_dotenv()

from openai import OpenAI
client = OpenAI()

with open("output.mp3", "rb") as f:
    transcriptions = client.audio.transcriptions.create(
        model="whisper-1",
        file=f,
    )
    print(transcriptions.text)
```

---

### Embeddings

í…ìŠ¤íŠ¸ë¥¼ ìˆ˜ì¹˜í™”í•˜ì—¬ í…ìŠ¤íŠ¸ ê°„ì˜ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •

```python
import pandas as pd
from openai import OpenAI

client = OpenAI()
text = "ì˜¤ëŠ˜ ì ì‹¬ì€ ë­˜ ë¨¹ì§€?"

response = client.embeddings.create(
    model="text-embedding-3-small",
    input=[text]
)

print(len(response.data[0].embedding))
```

**ìœ ì‚¬ë„ ê²€ìƒ‰**:
ì¿¼ë¦¬ì™€ ìœ ì‚¬í•œ í…ìŠ¤íŠ¸ë¥¼ ì°¾ëŠ” ê¸°ëŠ¥

```python
import numpy as np

cos_sim = lambda a, b: np.dot(a, b) / (np.linalg.norm(a) * np.linalg.norm(b))

def get_similar_texts(query, emb_df, top_n=5):
    query_emb = texts_to_embeddings(query)[0]
    emb_df['cos_sim'] = emb_df['embedding'].apply(lambda x: cos_sim(x, query_emb))
    return emb_df.sort_values('cos_sim', ascending=False).head(top_n)
```

---

### Moderation

ì½˜í…ì¸ ê°€ OpenAI ì •ì±…ì„ ì¤€ìˆ˜í•˜ëŠ”ì§€ í™•ì¸

```python
from dotenv import load_dotenv
load_dotenv()

from openai import OpenAI
import pandas as pd

client = OpenAI()

response = client.moderations.create(
    model="omni-moderation-latest",
    input="ì €ë†ˆì€ ë¯¸ì¹œë†ˆì…ë‹ˆë‹¤."
)
moderation_df = pd.DataFrame(response.results[0].categories, columns=['category', 'bool'])
moderation_df[moderation_df['bool'] == True]
```

---

### Streamlit

Streamlitì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬. ë°ì´í„° ì‹œê°í™”ì™€ ì›¹ ëŒ€ì‹œë³´ë“œ ì œì‘ì— ìœ ìš©.

```python
import streamlit as st

def main():
    st.set_page_config(page_title="Voice Chatbot", page_icon="ğŸ’¡", layout="wide")
    st.header("Voice Chatbot")

    with st.expander("ì‚¬ìš©ë²•"):
        st.write("1. ë…¹ìŒí•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§ˆë¬¸ì„ ë…¹ìŒí•©ë‹ˆë‹¤.")
        # ê¸°íƒ€ ì„¤ëª… ì¶”ê°€

    with st.sidebar:
        model = st.radio("GPT ëª¨ë¸", ["gpt-3.5-turbo", "gpt-4-turbo", "gpt-4o"], index=2)

    col1, col2 = st.columns(2)
    with col1:
        st.subheader("ë…¹ìŒí•˜ê¸°")
    with col2:
        st.subheader("í…ìŠ¤íŠ¸")

if __name__ == "__main__":
    main()
```
